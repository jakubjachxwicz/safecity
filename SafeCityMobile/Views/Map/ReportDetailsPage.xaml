<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SafeCityMobile.Views.Map.ReportDetailsPage"
             BackgroundColor="{StaticResource AppBackground}">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Style TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource White}"/>
            </Style>
            <Style TargetType="Label" x:Key="Caption">
                <Setter Property="TextColor" Value="{StaticResource BlueishGray}"/>
                <Setter Property="FontSize" Value="16"/>
            </Style>
            <Style TargetType="Label" x:Key="Value">
                <Setter Property="FontSize" Value="18"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="75" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="70" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Label Text="Szczegóły zgłoszenia"
           BackgroundColor="{StaticResource TitleBackground}"
           FontSize="18"
           FontAttributes="Bold"
           HorizontalTextAlignment="Center"
           VerticalTextAlignment="Center"/>

        <VerticalStackLayout Grid.Row="1"
                             Margin="16"
                             Spacing="6">
            <Label Text="Szczegóły zgłoszenia"
                   FontSize="18"
                   FontAttributes="Bold"/>

            <Label Text="Koordynaty"
                   Style="{StaticResource Caption}"/>

            <Label Text="{Binding FormattedCoordinates}"
                   Style="{StaticResource Value}"/>

            <Label Text="Data i godzina"
                   Style="{StaticResource Caption}"/>

            <Label Text="{Binding FormattedTimestamp}"
                   Style="{StaticResource Value}"/>

            <Label Text="Komentarz"
                   Style="{StaticResource Caption}"/>

            <Label Text="{Binding ReportComment}"
                   Style="{StaticResource Value}"/>

            <Label Text="Kategoria"
                   Style="{StaticResource Caption}"/>

            <Label Text="{Binding MappedCategory}"
                   Style="{StaticResource Value}"/>
        </VerticalStackLayout>

        <Label Grid.Row="2"
               Text="{Binding InfoLabel}"
               TextColor="{StaticResource RedButton}"
               HorizontalOptions="Center"
               VerticalTextAlignment="Center"
               FontSize="20"/>

        <VerticalStackLayout Grid.Row="3"
                             Spacing="12"
                             VerticalOptions="End"
                             Margin="16">
            <Grid ColumnSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <Button ImageSource="flag.png"
                        WidthRequest="50"
                        HeightRequest="50"
                        HorizontalOptions="Start"
                        BackgroundColor="{StaticResource DarkButton}"
                        Command="{Binding ReportCommand}"/>

                <Button Text="Edytuj"
                        Grid.Column="1"
                        BackgroundColor="{StaticResource LightButton}"
                        IsVisible="{Binding IsReportAuthor}"
                        IsEnabled="{Binding IsReportAuthor}"
                        Command="{Binding EditCommand}"/>

                <Button Text="Usuń"
                        Grid.Column="2"
                        BackgroundColor="{StaticResource RedButton}"
                        IsVisible="{Binding IsReportAuthor}"
                        IsEnabled="{Binding IsReportAuthor}"
                        Command="{Binding DeleteCommand}"/>
            </Grid>

            <Button Text="Powrót"
                    HeightRequest="48"
                    BackgroundColor="{StaticResource DarkButton}"
                    Command="{Binding ReturnCommand}"/>
        </VerticalStackLayout>
    </Grid>
</ContentPage>